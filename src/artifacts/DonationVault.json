{
  "address": "0x385720323f10C90fc9Ff605519f8E58E05465B72",
  "abi": [
    {
      "inputs": [
        {
          "internalType": "contract Bank",
          "name": "_bank",
          "type": "address"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "internalType": "address",
          "name": "donor",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "donatedAmount",
          "type": "uint256"
        }
      ],
      "name": "DonationReceived",
      "type": "event"
    },
    {
      "inputs": [],
      "name": "bank",
      "outputs": [
        {
          "internalType": "contract Bank",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "amount",
          "type": "uint256"
        }
      ],
      "name": "donate",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "owner",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "amount",
          "type": "uint256"
        },
        {
          "internalType": "bytes",
          "name": "",
          "type": "bytes"
        }
      ],
      "name": "receiveBalanceApproval",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address[]",
          "name": "depositors",
          "type": "address[]"
        },
        {
          "internalType": "uint256[]",
          "name": "depositedAmounts",
          "type": "uint256[]"
        }
      ],
      "name": "receiveBalanceIncrease",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    }
  ],
  "transactionHash": "0x5d62c7b1a5dfaef648e515b6e1ca888c3304e2d1f9480ac61408077e3a78d031",
  "receipt": {
    "to": null,
    "from": "0x819871C3Af9d26AaA3d8D17B2A79D1E313c56735",
    "contractAddress": "0x385720323f10C90fc9Ff605519f8E58E05465B72",
    "transactionIndex": 24,
    "gasUsed": "586625",
    "logsBloom": "0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
    "blockHash": "0x58fc2a070104affdafd08d551b520ef5c3f8e2cfbfc2bc8c9d3a23f089e61fd2",
    "transactionHash": "0x5d62c7b1a5dfaef648e515b6e1ca888c3304e2d1f9480ac61408077e3a78d031",
    "logs": [],
    "blockNumber": 8778665,
    "cumulativeGasUsed": "3934869",
    "status": 1,
    "byzantium": true
  },
  "args": ["0xD0019E41A621D42808878a47aFC380dD6cAa230e"],
  "numDeployments": 1,
  "solcInputHash": "1b13bc3b52c878c040492dac63e1533e",
  "metadata": "{\"compiler\":{\"version\":\"0.8.17+commit.8df45f5f\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[{\"internalType\":\"contract Bank\",\"name\":\"_bank\",\"type\":\"address\"}],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"address\",\"name\":\"donor\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"donatedAmount\",\"type\":\"uint256\"}],\"name\":\"DonationReceived\",\"type\":\"event\"},{\"inputs\":[],\"name\":\"bank\",\"outputs\":[{\"internalType\":\"contract Bank\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"donate\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"},{\"internalType\":\"bytes\",\"name\":\"\",\"type\":\"bytes\"}],\"name\":\"receiveBalanceApproval\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address[]\",\"name\":\"depositors\",\"type\":\"address[]\"},{\"internalType\":\"uint256[]\",\"name\":\"depositedAmounts\",\"type\":\"uint256[]\"}],\"name\":\"receiveBalanceIncrease\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"}],\"devdoc\":{\"kind\":\"dev\",\"methods\":{\"donate(uint256)\":{\"details\":\"Requirements:      - The caller's balance in the Bank must be greater than or equal        to the `amount`,      - Donation Vault must have an allowance for caller's balance in        the Bank for at least `amount`.\",\"params\":{\"amount\":\"Amount of the Bank balance to donate.\"}},\"receiveBalanceApproval(address,uint256,bytes)\":{\"details\":\"Requirements:      - Can only be called by the Bank via `approveBalanceAndCall`,      - The `owner` balance in the Bank must be greater than or equal        to the `amount`.\",\"params\":{\"amount\":\"The amount of the Bank balance approved by the owner        to be used by the vault.\",\"owner\":\"Address of the Bank balance owner who approved their        balance to be used by the vault.\"}},\"receiveBalanceIncrease(address[],uint256[])\":{\"details\":\"Requirements:      - Can only be called by the Bank after the Bridge swept deposits        and Bank increased balance for the vault,      - The `depositors` array must not be empty,      - The `depositors` array length must be equal to the        `depositedAmounts` array length.\",\"params\":{\"depositedAmounts\":\"Amounts deposited by individual depositors and        swept.\",\"depositors\":\"Addresses of depositors whose deposits have been swept.\"}}},\"title\":\"BTC donation vault\",\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{\"donate(uint256)\":{\"notice\":\"Transfers the given `amount` of the Bank balance from the         caller to the Donation Vault and immediately decreases the         vault's balance in the Bank by the transferred `amount`.\"},\"receiveBalanceApproval(address,uint256,bytes)\":{\"notice\":\"Transfers the given `amount` of the Bank balance from the         `owner` to the Donation Vault and immediately decreases the         vault's balance in the Bank by the transferred `amount`.\"},\"receiveBalanceIncrease(address[],uint256[])\":{\"notice\":\"Ignores the deposited amounts and does not increase depositors'         individual balances. The vault decreases its own tBTC balance         in the Bank by the total deposited amount.\"}},\"notice\":\"Vault that allows making BTC donations to the system. Upon deposit,         this vault does not increase depositors' balances and always         decreases its own balance in the same transaction. The vault also         allows making donations using existing Bank balances.         BEWARE: ALL BTC DEPOSITS TARGETING THIS VAULT ARE NOT REDEEMABLE         AND THERE IS NO WAY TO RESTORE THE DONATED BALANCE.         USE THIS VAULT ONLY WHEN YOU REALLY KNOW WHAT YOU ARE DOING!\",\"version\":1}},\"settings\":{\"compilationTarget\":{\"contracts/vault/DonationVault.sol\":\"DonationVault\"},\"evmVersion\":\"london\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\",\"useLiteralContent\":true},\"optimizer\":{\"enabled\":true,\"runs\":1000},\"remappings\":[]},\"sources\":{\"@openzeppelin/contracts/access/Ownable.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts v4.4.1 (access/Ownable.sol)\\n\\npragma solidity ^0.8.0;\\n\\nimport \\\"../utils/Context.sol\\\";\\n\\n/**\\n * @dev Contract module which provides a basic access control mechanism, where\\n * there is an account (an owner) that can be granted exclusive access to\\n * specific functions.\\n *\\n * By default, the owner account will be the one that deploys the contract. This\\n * can later be changed with {transferOwnership}.\\n *\\n * This module is used through inheritance. It will make available the modifier\\n * `onlyOwner`, which can be applied to your functions to restrict their use to\\n * the owner.\\n */\\nabstract contract Ownable is Context {\\n    address private _owner;\\n\\n    event OwnershipTransferred(address indexed previousOwner, address indexed newOwner);\\n\\n    /**\\n     * @dev Initializes the contract setting the deployer as the initial owner.\\n     */\\n    constructor() {\\n        _transferOwnership(_msgSender());\\n    }\\n\\n    /**\\n     * @dev Returns the address of the current owner.\\n     */\\n    function owner() public view virtual returns (address) {\\n        return _owner;\\n    }\\n\\n    /**\\n     * @dev Throws if called by any account other than the owner.\\n     */\\n    modifier onlyOwner() {\\n        require(owner() == _msgSender(), \\\"Ownable: caller is not the owner\\\");\\n        _;\\n    }\\n\\n    /**\\n     * @dev Leaves the contract without owner. It will not be possible to call\\n     * `onlyOwner` functions anymore. Can only be called by the current owner.\\n     *\\n     * NOTE: Renouncing ownership will leave the contract without an owner,\\n     * thereby removing any functionality that is only available to the owner.\\n     */\\n    function renounceOwnership() public virtual onlyOwner {\\n        _transferOwnership(address(0));\\n    }\\n\\n    /**\\n     * @dev Transfers ownership of the contract to a new account (`newOwner`).\\n     * Can only be called by the current owner.\\n     */\\n    function transferOwnership(address newOwner) public virtual onlyOwner {\\n        require(newOwner != address(0), \\\"Ownable: new owner is the zero address\\\");\\n        _transferOwnership(newOwner);\\n    }\\n\\n    /**\\n     * @dev Transfers ownership of the contract to a new account (`newOwner`).\\n     * Internal function without access restriction.\\n     */\\n    function _transferOwnership(address newOwner) internal virtual {\\n        address oldOwner = _owner;\\n        _owner = newOwner;\\n        emit OwnershipTransferred(oldOwner, newOwner);\\n    }\\n}\\n\",\"keccak256\":\"0x24e0364e503a9bbde94c715d26573a76f14cd2a202d45f96f52134ab806b67b9\",\"license\":\"MIT\"},\"@openzeppelin/contracts/utils/Context.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts v4.4.1 (utils/Context.sol)\\n\\npragma solidity ^0.8.0;\\n\\n/**\\n * @dev Provides information about the current execution context, including the\\n * sender of the transaction and its data. While these are generally available\\n * via msg.sender and msg.data, they should not be accessed in such a direct\\n * manner, since when dealing with meta-transactions the account sending and\\n * paying for execution may not be the actual sender (as far as an application\\n * is concerned).\\n *\\n * This contract is only required for intermediate, library-like contracts.\\n */\\nabstract contract Context {\\n    function _msgSender() internal view virtual returns (address) {\\n        return msg.sender;\\n    }\\n\\n    function _msgData() internal view virtual returns (bytes calldata) {\\n        return msg.data;\\n    }\\n}\\n\",\"keccak256\":\"0xe2e337e6dde9ef6b680e07338c493ebea1b5fd09b43424112868e9cc1706bca7\",\"license\":\"MIT\"},\"contracts/bank/Bank.sol\":{\"content\":\"// SPDX-License-Identifier: GPL-3.0-only\\r\\n\\r\\n// \\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588     \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c     \\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\r\\n// \\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588     \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c     \\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\r\\n//               \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c    \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c\\r\\n//               \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c    \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c\\r\\n// \\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588     \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c     \\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\r\\n// \\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588     \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c     \\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\r\\n//               \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c    \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c\\r\\n//               \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c    \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c\\r\\n//               \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c    \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c\\r\\n//               \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c    \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c\\r\\n//               \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c    \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c\\r\\n//               \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c    \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c\\r\\n\\r\\npragma solidity 0.8.17;\\r\\n\\r\\nimport \\\"@openzeppelin/contracts/access/Ownable.sol\\\";\\r\\n\\r\\nimport \\\"./IReceiveBalanceApproval.sol\\\";\\r\\nimport \\\"../vault/IVault.sol\\\";\\r\\n\\r\\n/// @title Bitcoin Bank\\r\\n/// @notice Bank is a central component tracking Bitcoin balances. Balances can\\r\\n///         be transferred between balance owners, and balance owners can\\r\\n///         approve their balances to be spent by others. Balances in the Bank\\r\\n///         are updated for depositors who deposited their Bitcoin into the\\r\\n///         Bridge and only the Bridge can increase balances.\\r\\n/// @dev Bank is a governable contract and the Governance can upgrade the Bridge\\r\\n///      address.\\r\\ncontract Bank is Ownable {\\r\\n    address public bridge;\\r\\n\\r\\n    /// @notice The balance of the given account in the Bank. Zero by default.\\r\\n    mapping(address => uint256) public balanceOf;\\r\\n\\r\\n    /// @notice The remaining amount of balance a spender will be\\r\\n    ///         allowed to transfer on behalf of an owner using\\r\\n    ///         `transferBalanceFrom`. Zero by default.\\r\\n    mapping(address => mapping(address => uint256)) public allowance;\\r\\n\\r\\n    /// @notice Returns the current nonce for an EIP2612 permission for the\\r\\n    ///         provided balance owner to protect against replay attacks. Used\\r\\n    ///         to construct an EIP2612 signature provided to the `permit`\\r\\n    ///         function.\\r\\n    mapping(address => uint256) public nonces;\\r\\n\\r\\n    uint256 public immutable cachedChainId;\\r\\n    bytes32 public immutable cachedDomainSeparator;\\r\\n\\r\\n    /// @notice Returns an EIP2612 Permit message hash. Used to construct\\r\\n    ///         an EIP2612 signature provided to the `permit` function.\\r\\n    bytes32 public constant PERMIT_TYPEHASH =\\r\\n        keccak256(\\r\\n            \\\"Permit(address owner,address spender,uint256 value,uint256 nonce,uint256 deadline)\\\"\\r\\n        );\\r\\n\\r\\n    event BalanceTransferred(\\r\\n        address indexed from,\\r\\n        address indexed to,\\r\\n        uint256 amount\\r\\n    );\\r\\n\\r\\n    event BalanceApproved(\\r\\n        address indexed owner,\\r\\n        address indexed spender,\\r\\n        uint256 amount\\r\\n    );\\r\\n\\r\\n    event BalanceIncreased(address indexed owner, uint256 amount);\\r\\n\\r\\n    event BalanceDecreased(address indexed owner, uint256 amount);\\r\\n\\r\\n    event BridgeUpdated(address newBridge);\\r\\n\\r\\n    modifier onlyBridge() {\\r\\n        require(msg.sender == address(bridge), \\\"Caller is not the bridge\\\");\\r\\n        _;\\r\\n    }\\r\\n\\r\\n    constructor() {\\r\\n        cachedChainId = block.chainid;\\r\\n        cachedDomainSeparator = buildDomainSeparator();\\r\\n    }\\r\\n\\r\\n    /// @notice Allows the Governance to upgrade the Bridge address.\\r\\n    /// @dev The function does not implement any governance delay and does not\\r\\n    ///      check the status of the Bridge. The Governance implementation needs\\r\\n    ///      to ensure all requirements for the upgrade are satisfied before\\r\\n    ///      executing this function.\\r\\n    ///      Requirements:\\r\\n    ///      - The new Bridge address must not be zero.\\r\\n    /// @param _bridge The new Bridge address.\\r\\n    function updateBridge(address _bridge) external onlyOwner {\\r\\n        require(_bridge != address(0), \\\"Bridge address must not be 0x0\\\");\\r\\n        bridge = _bridge;\\r\\n        emit BridgeUpdated(_bridge);\\r\\n    }\\r\\n\\r\\n    /// @notice Moves the given `amount` of balance from the caller to\\r\\n    ///         `recipient`.\\r\\n    /// @dev Requirements:\\r\\n    ///       - `recipient` cannot be the zero address,\\r\\n    ///       - the caller must have a balance of at least `amount`.\\r\\n    /// @param recipient The recipient of the balance.\\r\\n    /// @param amount The amount of the balance transferred.\\r\\n    function transferBalance(address recipient, uint256 amount) external {\\r\\n        _transferBalance(msg.sender, recipient, amount);\\r\\n    }\\r\\n\\r\\n    /// @notice Sets `amount` as the allowance of `spender` over the caller's\\r\\n    ///         balance. Does not allow updating an existing allowance to\\r\\n    ///         a value that is non-zero to avoid someone using both the old and\\r\\n    ///         the new allowance by unfortunate transaction ordering. To update\\r\\n    ///         an allowance to a non-zero value please set it to zero first or\\r\\n    ///         use `increaseBalanceAllowance` or `decreaseBalanceAllowance` for\\r\\n    ///         an atomic update.\\r\\n    /// @dev If the `amount` is set to `type(uint256).max`,\\r\\n    ///      `transferBalanceFrom` will not reduce an allowance.\\r\\n    /// @param spender The address that will be allowed to spend the balance.\\r\\n    /// @param amount The amount the spender is allowed to spend.\\r\\n    function approveBalance(address spender, uint256 amount) external {\\r\\n        require(\\r\\n            amount == 0 || allowance[msg.sender][spender] == 0,\\r\\n            \\\"Non-atomic allowance change not allowed\\\"\\r\\n        );\\r\\n        _approveBalance(msg.sender, spender, amount);\\r\\n    }\\r\\n\\r\\n    /// @notice Sets the `amount` as an allowance of a smart contract `spender`\\r\\n    ///         over the caller's balance and calls the `spender` via\\r\\n    ///         `receiveBalanceApproval`.\\r\\n    /// @dev If the `amount` is set to `type(uint256).max`, the potential\\r\\n    ///     `transferBalanceFrom` executed in `receiveBalanceApproval` of\\r\\n    ///      `spender` will not reduce an allowance. Beware that changing an\\r\\n    ///      allowance with this function brings the risk that `spender` may use\\r\\n    ///      both the old and the new allowance by unfortunate transaction\\r\\n    ///      ordering. Please use `increaseBalanceAllowance` and\\r\\n    ///      `decreaseBalanceAllowance` to eliminate the risk.\\r\\n    /// @param spender The smart contract that will be allowed to spend the\\r\\n    ///        balance.\\r\\n    /// @param amount The amount the spender contract is allowed to spend.\\r\\n    /// @param extraData Extra data passed to the `spender` contract via\\r\\n    ///        `receiveBalanceApproval` call.\\r\\n    function approveBalanceAndCall(\\r\\n        address spender,\\r\\n        uint256 amount,\\r\\n        bytes calldata extraData\\r\\n    ) external {\\r\\n        _approveBalance(msg.sender, spender, amount);\\r\\n        IReceiveBalanceApproval(spender).receiveBalanceApproval(\\r\\n            msg.sender,\\r\\n            amount,\\r\\n            extraData\\r\\n        );\\r\\n    }\\r\\n\\r\\n    /// @notice Atomically increases the caller's balance allowance granted to\\r\\n    ///         `spender` by the given `addedValue`.\\r\\n    /// @param spender The spender address for which the allowance is increased.\\r\\n    /// @param addedValue The amount by which the allowance is increased.\\r\\n    function increaseBalanceAllowance(address spender, uint256 addedValue)\\r\\n        external\\r\\n    {\\r\\n        _approveBalance(\\r\\n            msg.sender,\\r\\n            spender,\\r\\n            allowance[msg.sender][spender] + addedValue\\r\\n        );\\r\\n    }\\r\\n\\r\\n    /// @notice Atomically decreases the caller's balance allowance granted to\\r\\n    ///         `spender` by the given `subtractedValue`.\\r\\n    /// @dev Requirements:\\r\\n    ///      - `spender` must not be the zero address,\\r\\n    ///      - the current allowance for `spender` must not be lower than\\r\\n    ///        the `subtractedValue`.\\r\\n    /// @param spender The spender address for which the allowance is decreased.\\r\\n    /// @param subtractedValue The amount by which the allowance is decreased.\\r\\n    function decreaseBalanceAllowance(address spender, uint256 subtractedValue)\\r\\n        external\\r\\n    {\\r\\n        uint256 currentAllowance = allowance[msg.sender][spender];\\r\\n        require(\\r\\n            currentAllowance >= subtractedValue,\\r\\n            \\\"Can not decrease balance allowance below zero\\\"\\r\\n        );\\r\\n        unchecked {\\r\\n            _approveBalance(\\r\\n                msg.sender,\\r\\n                spender,\\r\\n                currentAllowance - subtractedValue\\r\\n            );\\r\\n        }\\r\\n    }\\r\\n\\r\\n    /// @notice Moves `amount` of balance from `spender` to `recipient` using the\\r\\n    ///         allowance mechanism. `amount` is then deducted from the caller's\\r\\n    ///         allowance unless the allowance was made for `type(uint256).max`.\\r\\n    /// @dev Requirements:\\r\\n    ///      - `recipient` cannot be the zero address,\\r\\n    ///      - `spender` must have a balance of at least `amount`,\\r\\n    ///      - the caller must have an allowance for `spender`'s balance of at\\r\\n    ///        least `amount`.\\r\\n    /// @param spender The address from which the balance is transferred.\\r\\n    /// @param recipient The address to which the balance is transferred.\\r\\n    /// @param amount The amount of balance that is transferred.\\r\\n    function transferBalanceFrom(\\r\\n        address spender,\\r\\n        address recipient,\\r\\n        uint256 amount\\r\\n    ) external {\\r\\n        uint256 currentAllowance = allowance[spender][msg.sender];\\r\\n        if (currentAllowance != type(uint256).max) {\\r\\n            require(\\r\\n                currentAllowance >= amount,\\r\\n                \\\"Transfer amount exceeds allowance\\\"\\r\\n            );\\r\\n            unchecked {\\r\\n                _approveBalance(spender, msg.sender, currentAllowance - amount);\\r\\n            }\\r\\n        }\\r\\n        _transferBalance(spender, recipient, amount);\\r\\n    }\\r\\n\\r\\n    /// @notice An EIP2612 approval made with secp256k1 signature. Users can\\r\\n    ///         authorize a transfer of their balance with a signature\\r\\n    ///         conforming to the EIP712 standard, rather than an on-chain\\r\\n    ///         transaction from their address. Anyone can submit this signature\\r\\n    ///         on the user's behalf by calling the `permit` function, paying\\r\\n    ///         gas fees, and possibly performing other actions in the same\\r\\n    ///         transaction.\\r\\n    /// @dev The deadline argument can be set to `type(uint256).max to create\\r\\n    ///      permits that effectively never expire.  If the `amount` is set\\r\\n    ///      to `type(uint256).max` then `transferBalanceFrom` will not\\r\\n    ///      reduce an allowance. Beware that changing an allowance with this\\r\\n    ///      function brings the risk that someone may use both the old and the\\r\\n    ///      new allowance by unfortunate transaction ordering. Please use\\r\\n    ///      `increaseBalanceAllowance` and `decreaseBalanceAllowance` to\\r\\n    ///      eliminate the risk.\\r\\n    /// @param owner The balance owner who signed the permission.\\r\\n    /// @param spender The address that will be allowed to spend the balance.\\r\\n    /// @param amount The amount the spender is allowed to spend.\\r\\n    /// @param deadline The UNIX time until which the permit is valid.\\r\\n    /// @param v V part of the permit signature.\\r\\n    /// @param r R part of the permit signature.\\r\\n    /// @param s S part of the permit signature.\\r\\n    function permit(\\r\\n        address owner,\\r\\n        address spender,\\r\\n        uint256 amount,\\r\\n        uint256 deadline,\\r\\n        uint8 v,\\r\\n        bytes32 r,\\r\\n        bytes32 s\\r\\n    ) external {\\r\\n        /* solhint-disable-next-line not-rely-on-time */\\r\\n        require(deadline >= block.timestamp, \\\"Permission expired\\\");\\r\\n\\r\\n        // Validate `s` and `v` values for a malleability concern described in EIP2.\\r\\n        // Only signatures with `s` value in the lower half of the secp256k1\\r\\n        // curve's order and `v` value of 27 or 28 are considered valid.\\r\\n        require(\\r\\n            uint256(s) <=\\r\\n                0x7FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF5D576E7357A4501DDFE92F46681B20A0,\\r\\n            \\\"Invalid signature 's' value\\\"\\r\\n        );\\r\\n        require(v == 27 || v == 28, \\\"Invalid signature 'v' value\\\");\\r\\n\\r\\n        bytes32 digest = keccak256(\\r\\n            abi.encodePacked(\\r\\n                \\\"\\\\x19\\\\x01\\\",\\r\\n                DOMAIN_SEPARATOR(),\\r\\n                keccak256(\\r\\n                    abi.encode(\\r\\n                        PERMIT_TYPEHASH,\\r\\n                        owner,\\r\\n                        spender,\\r\\n                        amount,\\r\\n                        nonces[owner]++,\\r\\n                        deadline\\r\\n                    )\\r\\n                )\\r\\n            )\\r\\n        );\\r\\n        address recoveredAddress = ecrecover(digest, v, r, s);\\r\\n        require(\\r\\n            recoveredAddress != address(0) && recoveredAddress == owner,\\r\\n            \\\"Invalid signature\\\"\\r\\n        );\\r\\n        _approveBalance(owner, spender, amount);\\r\\n    }\\r\\n\\r\\n    /// @notice Increases balances of the provided `recipients` by the provided\\r\\n    ///         `amounts`. Can only be called by the Bridge.\\r\\n    /// @dev Requirements:\\r\\n    ///       - length of `recipients` and `amounts` must be the same,\\r\\n    ///       - none of `recipients` addresses must point to the Bank.\\r\\n    /// @param recipients Balance increase recipients.\\r\\n    /// @param amounts Amounts by which balances are increased.\\r\\n    function increaseBalances(\\r\\n        address[] calldata recipients,\\r\\n        uint256[] calldata amounts\\r\\n    ) external onlyBridge {\\r\\n        require(\\r\\n            recipients.length == amounts.length,\\r\\n            \\\"Arrays must have the same length\\\"\\r\\n        );\\r\\n        for (uint256 i = 0; i < recipients.length; i++) {\\r\\n            _increaseBalance(recipients[i], amounts[i]);\\r\\n        }\\r\\n    }\\r\\n\\r\\n    /// @notice Increases balance of the provided `recipient` by the provided\\r\\n    ///         `amount`. Can only be called by the Bridge.\\r\\n    /// @dev Requirements:\\r\\n    ///      - `recipient` address must not point to the Bank.\\r\\n    /// @param recipient Balance increase recipient.\\r\\n    /// @param amount Amount by which the balance is increased.\\r\\n    function increaseBalance(address recipient, uint256 amount)\\r\\n        external\\r\\n        onlyBridge\\r\\n    {\\r\\n        _increaseBalance(recipient, amount);\\r\\n    }\\r\\n\\r\\n    /// @notice Increases the given smart contract `vault`'s balance and\\r\\n    ///         notifies the `vault` contract about it.\\r\\n    ///         Can be called only by the Bridge.\\r\\n    /// @dev Requirements:\\r\\n    ///       - `vault` must implement `IVault` interface,\\r\\n    ///       - length of `recipients` and `amounts` must be the same.\\r\\n    /// @param vault Address of `IVault` recipient contract.\\r\\n    /// @param recipients Balance increase recipients.\\r\\n    /// @param amounts Amounts by which balances are increased.\\r\\n    function increaseBalanceAndCall(\\r\\n        address vault,\\r\\n        address[] calldata recipients,\\r\\n        uint256[] calldata amounts\\r\\n    ) external onlyBridge {\\r\\n        require(\\r\\n            recipients.length == amounts.length,\\r\\n            \\\"Arrays must have the same length\\\"\\r\\n        );\\r\\n        uint256 totalAmount = 0;\\r\\n        for (uint256 i = 0; i < amounts.length; i++) {\\r\\n            totalAmount += amounts[i];\\r\\n        }\\r\\n        _increaseBalance(vault, totalAmount);\\r\\n        IVault(vault).receiveBalanceIncrease(recipients, amounts);\\r\\n    }\\r\\n\\r\\n    /// @notice Decreases caller's balance by the provided `amount`. There is no\\r\\n    ///         way to restore the balance so do not call this function unless\\r\\n    ///         you really know what you are doing!\\r\\n    /// @dev Requirements:\\r\\n    ///      - The caller must have a balance of at least `amount`.\\r\\n    /// @param amount The amount by which the balance is decreased.\\r\\n    function decreaseBalance(uint256 amount) external {\\r\\n        balanceOf[msg.sender] -= amount;\\r\\n        emit BalanceDecreased(msg.sender, amount);\\r\\n    }\\r\\n\\r\\n    /// @notice Returns hash of EIP712 Domain struct with `TBTC Bank` as\\r\\n    ///         a signing domain and Bank contract as a verifying contract.\\r\\n    ///         Used to construct an EIP2612 signature provided to the `permit`\\r\\n    ///         function.\\r\\n    /* solhint-disable-next-line func-name-mixedcase */\\r\\n    function DOMAIN_SEPARATOR() public view returns (bytes32) {\\r\\n        // As explained in EIP-2612, if the DOMAIN_SEPARATOR contains the\\r\\n        // chainId and is defined at contract deployment instead of\\r\\n        // reconstructed for every signature, there is a risk of possible replay\\r\\n        // attacks between chains in the event of a future chain split.\\r\\n        // To address this issue, we check the cached chain ID against the\\r\\n        // current one and in case they are different, we build domain separator\\r\\n        // from scratch.\\r\\n        if (block.chainid == cachedChainId) {\\r\\n            return cachedDomainSeparator;\\r\\n        } else {\\r\\n            return buildDomainSeparator();\\r\\n        }\\r\\n    }\\r\\n\\r\\n    function _increaseBalance(address recipient, uint256 amount) internal {\\r\\n        require(\\r\\n            recipient != address(this),\\r\\n            \\\"Can not increase balance for Bank\\\"\\r\\n        );\\r\\n        balanceOf[recipient] += amount;\\r\\n        emit BalanceIncreased(recipient, amount);\\r\\n    }\\r\\n\\r\\n    function _transferBalance(\\r\\n        address spender,\\r\\n        address recipient,\\r\\n        uint256 amount\\r\\n    ) private {\\r\\n        require(\\r\\n            recipient != address(0),\\r\\n            \\\"Can not transfer to the zero address\\\"\\r\\n        );\\r\\n        require(\\r\\n            recipient != address(this),\\r\\n            \\\"Can not transfer to the Bank address\\\"\\r\\n        );\\r\\n\\r\\n        uint256 spenderBalance = balanceOf[spender];\\r\\n        require(spenderBalance >= amount, \\\"Transfer amount exceeds balance\\\");\\r\\n        unchecked {\\r\\n            balanceOf[spender] = spenderBalance - amount;\\r\\n        }\\r\\n        balanceOf[recipient] += amount;\\r\\n        emit BalanceTransferred(spender, recipient, amount);\\r\\n    }\\r\\n\\r\\n    function _approveBalance(\\r\\n        address owner,\\r\\n        address spender,\\r\\n        uint256 amount\\r\\n    ) private {\\r\\n        require(spender != address(0), \\\"Can not approve to the zero address\\\");\\r\\n        allowance[owner][spender] = amount;\\r\\n        emit BalanceApproved(owner, spender, amount);\\r\\n    }\\r\\n\\r\\n    function buildDomainSeparator() private view returns (bytes32) {\\r\\n        return\\r\\n            keccak256(\\r\\n                abi.encode(\\r\\n                    keccak256(\\r\\n                        \\\"EIP712Domain(string name,string version,uint256 chainId,address verifyingContract)\\\"\\r\\n                    ),\\r\\n                    keccak256(bytes(\\\"TBTC Bank\\\")),\\r\\n                    keccak256(bytes(\\\"1\\\")),\\r\\n                    block.chainid,\\r\\n                    address(this)\\r\\n                )\\r\\n            );\\r\\n    }\\r\\n}\\r\\n\",\"keccak256\":\"0x571b64ce28c56de6911f6de59e0d3f2d5ba8dbd887c780fbd707d7ff4aabc94f\",\"license\":\"GPL-3.0-only\"},\"contracts/bank/IReceiveBalanceApproval.sol\":{\"content\":\"// SPDX-License-Identifier: GPL-3.0-only\\r\\n\\r\\n// \\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588     \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c     \\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\r\\n// \\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588     \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c     \\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\r\\n//               \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c    \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c\\r\\n//               \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c    \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c\\r\\n// \\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588     \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c     \\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\r\\n// \\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588     \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c     \\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\r\\n//               \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c    \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c\\r\\n//               \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c    \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c\\r\\n//               \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c    \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c\\r\\n//               \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c    \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c\\r\\n//               \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c    \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c\\r\\n//               \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c    \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c\\r\\n\\r\\npragma solidity 0.8.17;\\r\\n\\r\\n/// @title IReceiveBalanceApproval\\r\\n/// @notice `IReceiveBalanceApproval` is an interface for a smart contract\\r\\n///         consuming Bank balances approved to them in the same transaction by\\r\\n///         other contracts or externally owned accounts (EOA).\\r\\ninterface IReceiveBalanceApproval {\\r\\n    /// @notice Called by the Bank in `approveBalanceAndCall` function after\\r\\n    ///         the balance `owner` approved `amount` of their balance in the\\r\\n    ///         Bank for the contract. This way, the depositor can approve\\r\\n    ///         balance and call the contract to use the approved balance in\\r\\n    ///         a single transaction.\\r\\n    /// @param owner Address of the Bank balance owner who approved their\\r\\n    ///        balance to be used by the contract.\\r\\n    /// @param amount The amount of the Bank balance approved by the owner\\r\\n    ///        to be used by the contract.\\r\\n    /// @param extraData The `extraData` passed to `Bank.approveBalanceAndCall`.\\r\\n    /// @dev The implementation must ensure this function can only be called\\r\\n    ///      by the Bank. The Bank does _not_ guarantee that the `amount`\\r\\n    ///      approved by the `owner` currently exists on their balance. That is,\\r\\n    ///      the `owner` could approve more balance than they currently have.\\r\\n    ///      This works the same as `Bank.approve` function. The contract must\\r\\n    ///      ensure the actual balance is checked before performing any action\\r\\n    ///      based on it.\\r\\n    function receiveBalanceApproval(\\r\\n        address owner,\\r\\n        uint256 amount,\\r\\n        bytes calldata extraData\\r\\n    ) external;\\r\\n}\\r\\n\",\"keccak256\":\"0x82c417af8ba06c6485d15b3343674a698ded7ff5f2b9283b52242c90659b37ed\",\"license\":\"GPL-3.0-only\"},\"contracts/vault/DonationVault.sol\":{\"content\":\"// SPDX-License-Identifier: GPL-3.0-only\\r\\n\\r\\n// \\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588     \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c     \\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\r\\n// \\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588     \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c     \\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\r\\n//               \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c    \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c\\r\\n//               \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c    \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c\\r\\n// \\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588     \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c     \\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\r\\n// \\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588     \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c     \\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\r\\n//               \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c    \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c\\r\\n//               \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c    \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c\\r\\n//               \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c    \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c\\r\\n//               \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c    \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c\\r\\n//               \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c    \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c\\r\\n//               \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c    \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c\\r\\n\\r\\npragma solidity 0.8.17;\\r\\n\\r\\nimport \\\"./IVault.sol\\\";\\r\\nimport \\\"../bank/Bank.sol\\\";\\r\\n\\r\\n/// @title BTC donation vault\\r\\n/// @notice Vault that allows making BTC donations to the system. Upon deposit,\\r\\n///         this vault does not increase depositors' balances and always\\r\\n///         decreases its own balance in the same transaction. The vault also\\r\\n///         allows making donations using existing Bank balances.\\r\\n///\\r\\n///         BEWARE: ALL BTC DEPOSITS TARGETING THIS VAULT ARE NOT REDEEMABLE\\r\\n///         AND THERE IS NO WAY TO RESTORE THE DONATED BALANCE.\\r\\n///         USE THIS VAULT ONLY WHEN YOU REALLY KNOW WHAT YOU ARE DOING!\\r\\ncontract DonationVault is IVault {\\r\\n    Bank public bank;\\r\\n\\r\\n    event DonationReceived(address donor, uint256 donatedAmount);\\r\\n\\r\\n    modifier onlyBank() {\\r\\n        require(msg.sender == address(bank), \\\"Caller is not the Bank\\\");\\r\\n        _;\\r\\n    }\\r\\n\\r\\n    constructor(Bank _bank) {\\r\\n        require(\\r\\n            address(_bank) != address(0),\\r\\n            \\\"Bank can not be the zero address\\\"\\r\\n        );\\r\\n\\r\\n        bank = _bank;\\r\\n    }\\r\\n\\r\\n    /// @notice Transfers the given `amount` of the Bank balance from the\\r\\n    ///         caller to the Donation Vault and immediately decreases the\\r\\n    ///         vault's balance in the Bank by the transferred `amount`.\\r\\n    /// @param amount Amount of the Bank balance to donate.\\r\\n    /// @dev Requirements:\\r\\n    ///      - The caller's balance in the Bank must be greater than or equal\\r\\n    ///        to the `amount`,\\r\\n    ///      - Donation Vault must have an allowance for caller's balance in\\r\\n    ///        the Bank for at least `amount`.\\r\\n    function donate(uint256 amount) external {\\r\\n        require(\\r\\n            bank.balanceOf(msg.sender) >= amount,\\r\\n            \\\"Amount exceeds balance in the bank\\\"\\r\\n        );\\r\\n\\r\\n        emit DonationReceived(msg.sender, amount);\\r\\n\\r\\n        bank.transferBalanceFrom(msg.sender, address(this), amount);\\r\\n        bank.decreaseBalance(amount);\\r\\n    }\\r\\n\\r\\n    /// @notice Transfers the given `amount` of the Bank balance from the\\r\\n    ///         `owner` to the Donation Vault and immediately decreases the\\r\\n    ///         vault's balance in the Bank by the transferred `amount`.\\r\\n    /// @param owner Address of the Bank balance owner who approved their\\r\\n    ///        balance to be used by the vault.\\r\\n    /// @param amount The amount of the Bank balance approved by the owner\\r\\n    ///        to be used by the vault.\\r\\n    /// @dev Requirements:\\r\\n    ///      - Can only be called by the Bank via `approveBalanceAndCall`,\\r\\n    ///      - The `owner` balance in the Bank must be greater than or equal\\r\\n    ///        to the `amount`.\\r\\n    function receiveBalanceApproval(\\r\\n        address owner,\\r\\n        uint256 amount,\\r\\n        bytes memory\\r\\n    ) external override onlyBank {\\r\\n        require(\\r\\n            bank.balanceOf(owner) >= amount,\\r\\n            \\\"Amount exceeds balance in the bank\\\"\\r\\n        );\\r\\n\\r\\n        emit DonationReceived(owner, amount);\\r\\n\\r\\n        bank.transferBalanceFrom(owner, address(this), amount);\\r\\n        bank.decreaseBalance(amount);\\r\\n    }\\r\\n\\r\\n    /// @notice Ignores the deposited amounts and does not increase depositors'\\r\\n    ///         individual balances. The vault decreases its own tBTC balance\\r\\n    ///         in the Bank by the total deposited amount.\\r\\n    /// @param depositors Addresses of depositors whose deposits have been swept.\\r\\n    /// @param depositedAmounts Amounts deposited by individual depositors and\\r\\n    ///        swept.\\r\\n    /// @dev Requirements:\\r\\n    ///      - Can only be called by the Bank after the Bridge swept deposits\\r\\n    ///        and Bank increased balance for the vault,\\r\\n    ///      - The `depositors` array must not be empty,\\r\\n    ///      - The `depositors` array length must be equal to the\\r\\n    ///        `depositedAmounts` array length.\\r\\n    function receiveBalanceIncrease(\\r\\n        address[] calldata depositors,\\r\\n        uint256[] calldata depositedAmounts\\r\\n    ) external override onlyBank {\\r\\n        require(depositors.length != 0, \\\"No depositors specified\\\");\\r\\n\\r\\n        uint256 totalAmount = 0;\\r\\n        for (uint256 i = 0; i < depositors.length; i++) {\\r\\n            totalAmount += depositedAmounts[i];\\r\\n            emit DonationReceived(depositors[i], depositedAmounts[i]);\\r\\n        }\\r\\n\\r\\n        bank.decreaseBalance(totalAmount);\\r\\n    }\\r\\n}\\r\\n\",\"keccak256\":\"0xb59bc50cd27329a51190ffff826a836e44edad5488149920776724e9b8e3283b\",\"license\":\"GPL-3.0-only\"},\"contracts/vault/IVault.sol\":{\"content\":\"// SPDX-License-Identifier: GPL-3.0-only\\r\\n\\r\\n// \\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588     \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c     \\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\r\\n// \\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588     \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c     \\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\r\\n//               \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c    \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c\\r\\n//               \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c    \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c\\r\\n// \\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588     \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c     \\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\r\\n// \\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588     \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c     \\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\r\\n//               \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c    \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c\\r\\n//               \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c    \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c\\r\\n//               \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c    \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c\\r\\n//               \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c    \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c\\r\\n//               \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c    \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c\\r\\n//               \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c    \\u2590\\u2588\\u2588\\u2588\\u2588\\u258c\\r\\n\\r\\npragma solidity 0.8.17;\\r\\n\\r\\nimport \\\"../bank/IReceiveBalanceApproval.sol\\\";\\r\\n\\r\\n/// @title Bank Vault interface\\r\\n/// @notice `IVault` is an interface for a smart contract consuming Bank\\r\\n///         balances of other contracts or externally owned accounts (EOA).\\r\\ninterface IVault is IReceiveBalanceApproval {\\r\\n    /// @notice Called by the Bank in `increaseBalanceAndCall` function after\\r\\n    ///         increasing the balance in the Bank for the vault. It happens in\\r\\n    ///         the same transaction in which deposits were swept by the Bridge.\\r\\n    ///         This allows the depositor to route their deposit revealed to the\\r\\n    ///         Bridge to the particular smart contract (vault) in the same\\r\\n    ///         transaction in which the deposit is revealed. This way, the\\r\\n    ///         depositor does not have to execute additional transaction after\\r\\n    ///         the deposit gets swept by the Bridge to approve and transfer\\r\\n    ///         their balance to the vault.\\r\\n    /// @param depositors Addresses of depositors whose deposits have been swept.\\r\\n    /// @param depositedAmounts Amounts deposited by individual depositors and\\r\\n    ///        swept.\\r\\n    /// @dev The implementation must ensure this function can only be called\\r\\n    ///      by the Bank. The Bank guarantees that the vault's balance was\\r\\n    ///      increased by the sum of all deposited amounts before this function\\r\\n    ///      is called, in the same transaction.\\r\\n    function receiveBalanceIncrease(\\r\\n        address[] calldata depositors,\\r\\n        uint256[] calldata depositedAmounts\\r\\n    ) external;\\r\\n}\\r\\n\",\"keccak256\":\"0xc141db767401c06b3e1ffc808b87127548621446e4d32e3c4ca41317a1165af2\",\"license\":\"GPL-3.0-only\"}},\"version\":1}",
  "bytecode": "0x608060405234801561001057600080fd5b50604051610a1d380380610a1d83398101604081905261002f916100ae565b6001600160a01b0381166100895760405162461bcd60e51b815260206004820181905260248201527f42616e6b2063616e206e6f7420626520746865207a65726f2061646472657373604482015260640160405180910390fd5b600080546001600160a01b0319166001600160a01b03929092169190911790556100de565b6000602082840312156100c057600080fd5b81516001600160a01b03811681146100d757600080fd5b9392505050565b610930806100ed6000396000f3fe608060405234801561001057600080fd5b506004361061004c5760003560e01c8063461c637314610051578063475d05701461006657806376cdb03b14610079578063f14faf6f146100a8575b600080fd5b61006461005f3660046106df565b6100bb565b005b61006461007436600461077d565b610298565b60005461008c906001600160a01b031681565b6040516001600160a01b03909116815260200160405180910390f35b6100646100b6366004610848565b6104ca565b6000546001600160a01b0316331461011a5760405162461bcd60e51b815260206004820152601660248201527f43616c6c6572206973206e6f74207468652042616e6b0000000000000000000060448201526064015b60405180910390fd5b600083900361016b5760405162461bcd60e51b815260206004820152601760248201527f4e6f206465706f7369746f7273207370656369666965640000000000000000006044820152606401610111565b6000805b848110156102325783838281811061018957610189610861565b905060200201358261019b919061088d565b91507f264f630d9efa0d07053a31163641d9fcc0adafc9d9e76f1c37c2ce3a558d2c528686838181106101d0576101d0610861565b90506020020160208101906101e591906108a6565b8585848181106101f7576101f7610861565b604080516001600160a01b0390951685526020918202939093013590840152500160405180910390a18061022a816108c8565b91505061016f565b5060005460405163392aee4360e01b8152600481018390526001600160a01b039091169063392aee4390602401600060405180830381600087803b15801561027957600080fd5b505af115801561028d573d6000803e3d6000fd5b505050505050505050565b6000546001600160a01b031633146102f25760405162461bcd60e51b815260206004820152601660248201527f43616c6c6572206973206e6f74207468652042616e6b000000000000000000006044820152606401610111565b6000546040516370a0823160e01b81526001600160a01b038581166004830152849216906370a0823190602401602060405180830381865afa15801561033c573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061036091906108e1565b10156103b95760405162461bcd60e51b815260206004820152602260248201527f416d6f756e7420657863656564732062616c616e636520696e207468652062616044820152616e6b60f01b6064820152608401610111565b604080516001600160a01b0385168152602081018490527f264f630d9efa0d07053a31163641d9fcc0adafc9d9e76f1c37c2ce3a558d2c52910160405180910390a1600054604051631f1b6d2760e21b81526001600160a01b0385811660048301523060248301526044820185905290911690637c6db49c90606401600060405180830381600087803b15801561044f57600080fd5b505af1158015610463573d6000803e3d6000fd5b505060005460405163392aee4360e01b8152600481018690526001600160a01b03909116925063392aee439150602401600060405180830381600087803b1580156104ad57600080fd5b505af11580156104c1573d6000803e3d6000fd5b50505050505050565b6000546040516370a0823160e01b815233600482015282916001600160a01b0316906370a0823190602401602060405180830381865afa158015610512573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061053691906108e1565b101561058f5760405162461bcd60e51b815260206004820152602260248201527f416d6f756e7420657863656564732062616c616e636520696e207468652062616044820152616e6b60f01b6064820152608401610111565b60408051338152602081018390527f264f630d9efa0d07053a31163641d9fcc0adafc9d9e76f1c37c2ce3a558d2c52910160405180910390a1600054604051631f1b6d2760e21b8152336004820152306024820152604481018390526001600160a01b0390911690637c6db49c90606401600060405180830381600087803b15801561061a57600080fd5b505af115801561062e573d6000803e3d6000fd5b505060005460405163392aee4360e01b8152600481018590526001600160a01b03909116925063392aee439150602401600060405180830381600087803b15801561067857600080fd5b505af115801561068c573d6000803e3d6000fd5b5050505050565b60008083601f8401126106a557600080fd5b50813567ffffffffffffffff8111156106bd57600080fd5b6020830191508360208260051b85010111156106d857600080fd5b9250929050565b600080600080604085870312156106f557600080fd5b843567ffffffffffffffff8082111561070d57600080fd5b61071988838901610693565b9096509450602087013591508082111561073257600080fd5b5061073f87828801610693565b95989497509550505050565b80356001600160a01b038116811461076257600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60008060006060848603121561079257600080fd5b61079b8461074b565b925060208401359150604084013567ffffffffffffffff808211156107bf57600080fd5b818601915086601f8301126107d357600080fd5b8135818111156107e5576107e5610767565b604051601f8201601f19908116603f0116810190838211818310171561080d5761080d610767565b8160405282815289602084870101111561082657600080fd5b8260208601602083013760006020848301015280955050505050509250925092565b60006020828403121561085a57600080fd5b5035919050565b634e487b7160e01b600052603260045260246000fd5b634e487b7160e01b600052601160045260246000fd5b808201808211156108a0576108a0610877565b92915050565b6000602082840312156108b857600080fd5b6108c18261074b565b9392505050565b6000600182016108da576108da610877565b5060010190565b6000602082840312156108f357600080fd5b505191905056fea264697066735822122012d42c285ef3a46364f908e5195766617fd14187052654a2fa4f99127b10fa1964736f6c63430008110033",
  "deployedBytecode": "0x608060405234801561001057600080fd5b506004361061004c5760003560e01c8063461c637314610051578063475d05701461006657806376cdb03b14610079578063f14faf6f146100a8575b600080fd5b61006461005f3660046106df565b6100bb565b005b61006461007436600461077d565b610298565b60005461008c906001600160a01b031681565b6040516001600160a01b03909116815260200160405180910390f35b6100646100b6366004610848565b6104ca565b6000546001600160a01b0316331461011a5760405162461bcd60e51b815260206004820152601660248201527f43616c6c6572206973206e6f74207468652042616e6b0000000000000000000060448201526064015b60405180910390fd5b600083900361016b5760405162461bcd60e51b815260206004820152601760248201527f4e6f206465706f7369746f7273207370656369666965640000000000000000006044820152606401610111565b6000805b848110156102325783838281811061018957610189610861565b905060200201358261019b919061088d565b91507f264f630d9efa0d07053a31163641d9fcc0adafc9d9e76f1c37c2ce3a558d2c528686838181106101d0576101d0610861565b90506020020160208101906101e591906108a6565b8585848181106101f7576101f7610861565b604080516001600160a01b0390951685526020918202939093013590840152500160405180910390a18061022a816108c8565b91505061016f565b5060005460405163392aee4360e01b8152600481018390526001600160a01b039091169063392aee4390602401600060405180830381600087803b15801561027957600080fd5b505af115801561028d573d6000803e3d6000fd5b505050505050505050565b6000546001600160a01b031633146102f25760405162461bcd60e51b815260206004820152601660248201527f43616c6c6572206973206e6f74207468652042616e6b000000000000000000006044820152606401610111565b6000546040516370a0823160e01b81526001600160a01b038581166004830152849216906370a0823190602401602060405180830381865afa15801561033c573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061036091906108e1565b10156103b95760405162461bcd60e51b815260206004820152602260248201527f416d6f756e7420657863656564732062616c616e636520696e207468652062616044820152616e6b60f01b6064820152608401610111565b604080516001600160a01b0385168152602081018490527f264f630d9efa0d07053a31163641d9fcc0adafc9d9e76f1c37c2ce3a558d2c52910160405180910390a1600054604051631f1b6d2760e21b81526001600160a01b0385811660048301523060248301526044820185905290911690637c6db49c90606401600060405180830381600087803b15801561044f57600080fd5b505af1158015610463573d6000803e3d6000fd5b505060005460405163392aee4360e01b8152600481018690526001600160a01b03909116925063392aee439150602401600060405180830381600087803b1580156104ad57600080fd5b505af11580156104c1573d6000803e3d6000fd5b50505050505050565b6000546040516370a0823160e01b815233600482015282916001600160a01b0316906370a0823190602401602060405180830381865afa158015610512573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061053691906108e1565b101561058f5760405162461bcd60e51b815260206004820152602260248201527f416d6f756e7420657863656564732062616c616e636520696e207468652062616044820152616e6b60f01b6064820152608401610111565b60408051338152602081018390527f264f630d9efa0d07053a31163641d9fcc0adafc9d9e76f1c37c2ce3a558d2c52910160405180910390a1600054604051631f1b6d2760e21b8152336004820152306024820152604481018390526001600160a01b0390911690637c6db49c90606401600060405180830381600087803b15801561061a57600080fd5b505af115801561062e573d6000803e3d6000fd5b505060005460405163392aee4360e01b8152600481018590526001600160a01b03909116925063392aee439150602401600060405180830381600087803b15801561067857600080fd5b505af115801561068c573d6000803e3d6000fd5b5050505050565b60008083601f8401126106a557600080fd5b50813567ffffffffffffffff8111156106bd57600080fd5b6020830191508360208260051b85010111156106d857600080fd5b9250929050565b600080600080604085870312156106f557600080fd5b843567ffffffffffffffff8082111561070d57600080fd5b61071988838901610693565b9096509450602087013591508082111561073257600080fd5b5061073f87828801610693565b95989497509550505050565b80356001600160a01b038116811461076257600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60008060006060848603121561079257600080fd5b61079b8461074b565b925060208401359150604084013567ffffffffffffffff808211156107bf57600080fd5b818601915086601f8301126107d357600080fd5b8135818111156107e5576107e5610767565b604051601f8201601f19908116603f0116810190838211818310171561080d5761080d610767565b8160405282815289602084870101111561082657600080fd5b8260208601602083013760006020848301015280955050505050509250925092565b60006020828403121561085a57600080fd5b5035919050565b634e487b7160e01b600052603260045260246000fd5b634e487b7160e01b600052601160045260246000fd5b808201808211156108a0576108a0610877565b92915050565b6000602082840312156108b857600080fd5b6108c18261074b565b9392505050565b6000600182016108da576108da610877565b5060010190565b6000602082840312156108f357600080fd5b505191905056fea264697066735822122012d42c285ef3a46364f908e5195766617fd14187052654a2fa4f99127b10fa1964736f6c63430008110033",
  "devdoc": {
    "kind": "dev",
    "methods": {
      "donate(uint256)": {
        "details": "Requirements:      - The caller's balance in the Bank must be greater than or equal        to the `amount`,      - Donation Vault must have an allowance for caller's balance in        the Bank for at least `amount`.",
        "params": {
          "amount": "Amount of the Bank balance to donate."
        }
      },
      "receiveBalanceApproval(address,uint256,bytes)": {
        "details": "Requirements:      - Can only be called by the Bank via `approveBalanceAndCall`,      - The `owner` balance in the Bank must be greater than or equal        to the `amount`.",
        "params": {
          "amount": "The amount of the Bank balance approved by the owner        to be used by the vault.",
          "owner": "Address of the Bank balance owner who approved their        balance to be used by the vault."
        }
      },
      "receiveBalanceIncrease(address[],uint256[])": {
        "details": "Requirements:      - Can only be called by the Bank after the Bridge swept deposits        and Bank increased balance for the vault,      - The `depositors` array must not be empty,      - The `depositors` array length must be equal to the        `depositedAmounts` array length.",
        "params": {
          "depositedAmounts": "Amounts deposited by individual depositors and        swept.",
          "depositors": "Addresses of depositors whose deposits have been swept."
        }
      }
    },
    "title": "BTC donation vault",
    "version": 1
  },
  "userdoc": {
    "kind": "user",
    "methods": {
      "donate(uint256)": {
        "notice": "Transfers the given `amount` of the Bank balance from the         caller to the Donation Vault and immediately decreases the         vault's balance in the Bank by the transferred `amount`."
      },
      "receiveBalanceApproval(address,uint256,bytes)": {
        "notice": "Transfers the given `amount` of the Bank balance from the         `owner` to the Donation Vault and immediately decreases the         vault's balance in the Bank by the transferred `amount`."
      },
      "receiveBalanceIncrease(address[],uint256[])": {
        "notice": "Ignores the deposited amounts and does not increase depositors'         individual balances. The vault decreases its own tBTC balance         in the Bank by the total deposited amount."
      }
    },
    "notice": "Vault that allows making BTC donations to the system. Upon deposit,         this vault does not increase depositors' balances and always         decreases its own balance in the same transaction. The vault also         allows making donations using existing Bank balances.         BEWARE: ALL BTC DEPOSITS TARGETING THIS VAULT ARE NOT REDEEMABLE         AND THERE IS NO WAY TO RESTORE THE DONATED BALANCE.         USE THIS VAULT ONLY WHEN YOU REALLY KNOW WHAT YOU ARE DOING!",
    "version": 1
  },
  "storageLayout": {
    "storage": [
      {
        "astId": 33053,
        "contract": "contracts/vault/DonationVault.sol:DonationVault",
        "label": "bank",
        "offset": 0,
        "slot": "0",
        "type": "t_contract(Bank)18611"
      }
    ],
    "types": {
      "t_contract(Bank)18611": {
        "encoding": "inplace",
        "label": "contract Bank",
        "numberOfBytes": "20"
      }
    }
  }
}
